(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{153:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),i=n.n(a),o=(n(85),n(50)),s=n.n(o),u=n(69),l=n(51),d=n(70),m=n(71),f=n(78),k=n(72),p=n(79),h=n(28),v=n(73),y=n(77);n(152),n(153);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=n(154),w=7,g=12,x=function(e){return e<=5&&e%2===1||e>5&&e%2===0?"white":"black"},j=function(e){return e-21},E=function(e){return e+21};function T(e){var t=e.selectedKeys;return c.a.createElement("div",{className:"piano"},c.a.createElement(I,{color:"white",selected:void 0!==t[0]}),c.a.createElement(I,{color:"black",selected:void 0!==t[1]}),c.a.createElement(I,{color:"white",selected:void 0!==t[2]}),Object(h.a)(Array(w)).map((function(e,n){return Object(h.a)(Array(g)).map((function(e,r){return c.a.createElement(I,{color:x(r+1),selected:void 0!==t[n*g+r+3]})}))})),c.a.createElement(I,{color:"white",selected:void 0!==t[87]}))}var I=function(e){var t=e.color,n=e.selected;return c.a.createElement("div",{className:"".concat("black"===t?"black-key":"white-key"," ").concat(n?"selected":"")})},P=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(c)))).state={currentTickIndex:-1,midi:{},selectedKeys:{},notes:[]},n.getNotesForTick=function(e){return n.state.notes.filter((function(t){return t.ticks===e||t.ticks<=e&&t.ticks+t.durationTicks>e})).map((function(e){return j(e.midi)})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(l.a)({},t,!0))}),{})},n.previous=function(){var e=n.state.notes,t=e.findIndex((function(t){return t.ticks===e[n.state.currentTickIndex].ticks}));if(t>0){var r=n.getNotesForTick(e[t-1].ticks);n.setState({currentTickIndex:t-1,selectedKeys:r})}},n.next=function(){var e=n.state.notes,t=0;-1!==n.state.currentTickIndex&&(t=e.findIndex((function(t){return t.ticks>e[n.state.currentTickIndex].ticks})));var r=n.getNotesForTick(e[t].ticks);n.setState({currentTickIndex:t,selectedKeys:r})},n.updatePosition=function(e){var t=n.state.notes;n.setState({currentTickIndex:e,selectedKeys:n.getNotesForTick(t[e].ticks)})},n.play=function(){Object.keys(n.state.selectedKeys).map((function(e){return E(parseInt(e))})).forEach((function(e){n.piano.play(e)}))},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Midi.fromUrl("/wheresmymind.mid");case 2:return t=e.sent,(n=[].concat(Object(h.a)(t.tracks[0].notes),Object(h.a)(t.tracks[1]?t.tracks[1].notes:[]))).sort((function(e,t){return e.ticks-t.ticks===0?e.durationTicks-t.durationTicks:e.ticks-t.ticks})),console.log(n),e.next=8,O.instrument(new AudioContext,"acoustic_grand_piano");case 8:this.piano=e.sent,this.setState({midi:t,notes:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},c.a.createElement("p",{style:{color:"white"}},this.state.currentTickIndex),c.a.createElement("button",{className:"mr1",onClick:this.previous},"Previous"),c.a.createElement("button",{className:"mr1",onClick:this.next},"Next"),c.a.createElement("button",{onClick:this.play},"Play")),c.a.createElement("div",{style:{width:"50%",margin:"0 auto",marginBottom:"10px"}},c.a.createElement(y.a,{min:0,max:this.state.notes.length-1,onChange:this.updatePosition,value:this.state.currentTickIndex})),c.a.createElement(T,{selectedKeys:this.state.selectedKeys}))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,n){e.exports=n(169)},85:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.cc031434.chunk.js.map