(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{154:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),i=n.n(r),s=(n(86),n(35)),o=n.n(s),u=n(25),l=n(34),m=n(52),k=n(70),d=n(71),f=n(79),h=n(72),p=n(80),y=n(73),v=n(78),x=function(e){var t=e.color,n=e.className;return console.log(n),c.a.createElement("div",{className:"".concat("black"===t?"black-key":"white-key"," ").concat(n||"")})},b=function(e){var t=e.keyClassNames;return c.a.createElement("div",{className:"piano"},c.a.createElement(x,{color:"white",className:t[0]}),c.a.createElement(x,{color:"black",className:t[1]}),c.a.createElement(x,{color:"white",className:t[2]}),Object(u.a)(Array(7)).map((function(e,n){return Object(u.a)(Array(12)).map((function(e,a){return c.a.createElement(x,{color:(r=a+1,r<=5&&r%2===1||r>5&&r%2===0?"white":"black"),className:t[12*n+a+3]});var r}))})),c.a.createElement(x,{color:"white",className:void 0!==t[87]}))},w=(n(153),n(154),n(77)),E=n.n(w),g=n(9),N=n.n(g),T=n(155),O=function(e){return e-21},j=function(e){return e+21},I=function(e,t){return N()({"rh-selected":e.rh,selected:!e.rh,sustain:t>e.ticks})},C=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={currentTickIndex:-1,midi:{},selectedKeys:{},notes:[]},n.getNotesForTick=function(e){return n.state.notes.filter((function(t){return t.ticks===e||t.ticks<=e&&t.ticks+t.durationTicks>e})).map((function(e){return{rh:e.rh,ticks:e.ticks,key:O(e.midi)}})).reduce((function(t,n){return Object(m.a)({},t,Object(l.a)({},n.key,I(n,e)))}),{})},n.previous=function(){var e=n.state.notes,t=e.findIndex((function(t){return t.ticks===e[n.state.currentTickIndex].ticks}));if(t>0){var a=n.getNotesForTick(e[t-1].ticks);n.setState({currentTickIndex:t-1,selectedKeys:a})}},n.next=function(){var e=n.state.notes,t=0;-1!==n.state.currentTickIndex&&(t=e.findIndex((function(t){return t.ticks>e[n.state.currentTickIndex].ticks})));var a=n.getNotesForTick(e[t].ticks);n.setState({currentTickIndex:t,selectedKeys:a})},n.updatePosition=function(e){var t=n.state.notes;n.setState({currentTickIndex:e,selectedKeys:n.getNotesForTick(t[e].ticks)})},n.play=function(){Object.keys(n.state.selectedKeys).filter((function(e){return n.state.selectedKeys[e].indexOf("sustain")<0})).map((function(e){return j(parseInt(e))})).forEach((function(e){n.piano.play(e)}))},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(y.Midi.fromUrl(E.a));case 2:return e=n.sent,(t=[].concat(Object(u.a)(e.tracks[0].notes),Object(u.a)((e.tracks[1]?e.tracks[1].notes:[]).map((function(e){return Object(m.a)({},e,{rh:!0})}))))).sort((function(e,t){return e.ticks-t.ticks===0?e.durationTicks-t.durationTicks:e.ticks-t.ticks})),n.next=7,o.a.awrap(T.instrument(new AudioContext,"acoustic_grand_piano"));case 7:this.piano=n.sent,this.setState({midi:e,notes:t});case 9:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},c.a.createElement("p",{style:{color:"white"}},this.state.currentTickIndex),c.a.createElement("button",{className:"mr1",onClick:this.previous},"Previous"),c.a.createElement("button",{className:"mr1",onClick:this.next},"Next"),c.a.createElement("button",{onClick:this.play},"Play")),c.a.createElement("div",{style:{width:"50%",margin:"0 auto",marginBottom:"10px"}},c.a.createElement(v.a,{min:0,max:this.state.notes.length-1,onChange:this.updatePosition,value:this.state.currentTickIndex})),c.a.createElement(b,{keyClassNames:this.state.selectedKeys}))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,n){e.exports=n.p+"static/media/wheresmymind.32304232.mid"},81:function(e,t,n){e.exports=n(170)},86:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.5a108eca.chunk.js.map