(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){e.exports=n.p+"static/media/wheresmymind.32304232.mid"},172:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),i=n.n(r),s=(n(87),n(20)),o=n(29),u=n.n(o),l=n(35),m=n(36),d=n(70),f=n(71),k=n(80),h=n(72),p=n(81),v=n(73),y=n(79),x=function(e){var t=e.color,n=e.className;return c.a.createElement("div",{className:"".concat("black"===t?"black-key":"white-key"," ").concat(n||"")})},g=function(e){var t=e.keyClassNames;return c.a.createElement("div",{className:"piano"},c.a.createElement(x,{color:"white",className:t[0]}),c.a.createElement(x,{color:"black",className:t[1]}),c.a.createElement(x,{color:"white",className:t[2]}),Object(s.a)(Array(7)).map((function(e,n){return Object(s.a)(Array(12)).map((function(e,a){return c.a.createElement(x,{color:(r=a+1,r<=5&&r%2===1||r>5&&r%2===0?"white":"black"),className:t[12*n+a+3]});var r}))})),c.a.createElement(x,{color:"white",className:void 0!==t[87]}))},b=(n(154),n(155),n(156),n(77)),w=n.n(b),E=n(78),N=n.n(E),T=n(9),O=n.n(T),j=n(157),I={"./rachmaninoff.mid":N.a,"./lacrimosa.mid":w.a},S=function(e){return e-21},C=function(e){return e+21},K=function(e,t){return O()({"rh-selected":e.rh,selected:!e.rh,sustain:t>e.ticks})},A=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={currentTickIndex:-1,midi:{},selectedKeys:{},notes:[],currentSong:"./lacrimosa.mid"},n.getNotesForTick=function(e){return n.state.notes.filter((function(t){return t.ticks===e||t.ticks<=e&&t.ticks+t.durationTicks>e})).map((function(e){return{rh:e.rh,ticks:e.ticks,key:S(e.midi)}})).reduce((function(t,n){return Object(m.a)({},t,Object(l.a)({},n.key,K(n,e)))}),{})},n.previous=function(){var e=n.state.notes,t=e.findIndex((function(t){return t.ticks===e[n.state.currentTickIndex].ticks}));if(t>0){var a=n.getNotesForTick(e[t-1].ticks);n.setState({currentTickIndex:t-1,selectedKeys:a})}},n.next=function(){var e=n.state.notes,t=0;-1!==n.state.currentTickIndex&&(t=e.findIndex((function(t){return t.ticks>e[n.state.currentTickIndex].ticks})));var a=n.getNotesForTick(e[t].ticks);n.setState({currentTickIndex:t,selectedKeys:a})},n.updatePosition=function(e){var t=n.state.notes;n.setState({currentTickIndex:e,selectedKeys:n.getNotesForTick(t[e].ticks)})},n.play=function(){Object.keys(n.state.selectedKeys).filter((function(e){return n.state.selectedKeys[e].indexOf("sustain")<0})).map((function(e){return C(parseInt(e))})).forEach((function(e){n.piano.play(e)}))},n.setCurrentSong=function(e){n.loadSong(e.target.value)},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadSong(this.state.currentSong);case 1:case"end":return e.stop()}}),null,this)}},{key:"loadSong",value:function(e){var t,n,a,c=this;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=I[e],r.next=3,u.a.awrap(v.Midi.fromUrl(t));case 3:return n=r.sent,(a=[].concat(Object(s.a)(n.tracks[0].notes),Object(s.a)((n.tracks[1]?n.tracks[1].notes:[]).map((function(e){return Object(m.a)({},e,{rh:!0})}))),Object(s.a)((n.tracks[2]?n.tracks[2].notes:[]).map((function(e){return Object(m.a)({},e,{rh:!0})}))))).sort((function(e,t){return e.ticks-t.ticks===0?e.durationTicks-t.durationTicks:e.ticks-t.ticks})),r.next=8,u.a.awrap(j.instrument(new AudioContext,"acoustic_grand_piano"));case 8:this.piano=r.sent,this.setState({currentSong:e,midi:n,notes:a,currentTickIndex:-1,selectedKeys:{}},(function(){c.next()}));case 10:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},c.a.createElement("select",{value:this.state.currentSong,onChange:this.setCurrentSong},c.a.createElement("option",{value:"./lacrimosa.mid"},"Lacrimosa"),c.a.createElement("option",{value:"./rachmaninoff.mid"},"Rachmaninoff")),c.a.createElement("p",{style:{color:"white"}},this.state.currentTickIndex),c.a.createElement("button",{className:"mr1",onClick:this.previous},"Previous"),c.a.createElement("button",{className:"mr1",onClick:this.next},"Next"),c.a.createElement("button",{onClick:this.play},"Play")),c.a.createElement("div",{style:{width:"50%",margin:"0 auto",marginBottom:"10px"}},c.a.createElement(y.a,{min:0,max:this.state.notes.length-1,onChange:this.updatePosition,value:this.state.currentTickIndex})),c.a.createElement(g,{keyClassNames:this.state.selectedKeys}))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,n){e.exports=n.p+"static/media/lacrimosa.a2f5513e.mid"},78:function(e,t,n){e.exports=n.p+"static/media/rachmaninoff.9302bc1a.mid"},82:function(e,t,n){e.exports=n(172)},87:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.b88cdc9f.chunk.js.map