(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{154:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),i=n.n(a),o=(n(86),n(50)),s=n.n(o),u=n(69),l=n(51),d=n(70),m=n(71),f=n(79),p=n(72),k=n(80),h=n(28),v=n(73),y=n(78),b=(n(153),n(154),n(77)),O=n.n(b);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=n(155),x=7,j=12,E=function(e){return e<=5&&e%2===1||e>5&&e%2===0?"white":"black"},T=function(e){return e-21},I=function(e){return e+21};function P(e){var t=e.selectedKeys;return c.a.createElement("div",{className:"piano"},c.a.createElement(N,{color:"white",selected:void 0!==t[0]}),c.a.createElement(N,{color:"black",selected:void 0!==t[1]}),c.a.createElement(N,{color:"white",selected:void 0!==t[2]}),Object(h.a)(Array(x)).map((function(e,n){return Object(h.a)(Array(j)).map((function(e,r){return c.a.createElement(N,{color:E(r+1),selected:void 0!==t[n*j+r+3]})}))})),c.a.createElement(N,{color:"white",selected:void 0!==t[87]}))}var N=function(e){var t=e.color,n=e.selected;return c.a.createElement("div",{className:"".concat("black"===t?"black-key":"white-key"," ").concat(n?"selected":"")})},K=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={currentTickIndex:-1,midi:{},selectedKeys:{},notes:[]},n.getNotesForTick=function(e){return n.state.notes.filter((function(t){return t.ticks===e||t.ticks<=e&&t.ticks+t.durationTicks>e})).map((function(e){return T(e.midi)})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(l.a)({},t,!0))}),{})},n.previous=function(){var e=n.state.notes,t=e.findIndex((function(t){return t.ticks===e[n.state.currentTickIndex].ticks}));if(t>0){var r=n.getNotesForTick(e[t-1].ticks);n.setState({currentTickIndex:t-1,selectedKeys:r})}},n.next=function(){var e=n.state.notes,t=0;-1!==n.state.currentTickIndex&&(t=e.findIndex((function(t){return t.ticks>e[n.state.currentTickIndex].ticks})));var r=n.getNotesForTick(e[t].ticks);n.setState({currentTickIndex:t,selectedKeys:r})},n.updatePosition=function(e){var t=n.state.notes;n.setState({currentTickIndex:e,selectedKeys:n.getNotesForTick(t[e].ticks)})},n.play=function(){Object.keys(n.state.selectedKeys).map((function(e){return I(parseInt(e))})).forEach((function(e){n.piano.play(e)}))},n}return Object(k.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Midi.fromUrl(O.a);case 2:return t=e.sent,(n=[].concat(Object(h.a)(t.tracks[0].notes),Object(h.a)(t.tracks[1]?t.tracks[1].notes:[]))).sort((function(e,t){return e.ticks-t.ticks===0?e.durationTicks-t.durationTicks:e.ticks-t.ticks})),console.log(n),e.next=8,g.instrument(new AudioContext,"acoustic_grand_piano");case 8:this.piano=e.sent,this.setState({midi:t,notes:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},c.a.createElement("p",{style:{color:"white"}},this.state.currentTickIndex),c.a.createElement("button",{className:"mr1",onClick:this.previous},"Previous"),c.a.createElement("button",{className:"mr1",onClick:this.next},"Next"),c.a.createElement("button",{onClick:this.play},"Play")),c.a.createElement("div",{style:{width:"50%",margin:"0 auto",marginBottom:"10px"}},c.a.createElement(y.a,{min:0,max:this.state.notes.length-1,onChange:this.updatePosition,value:this.state.currentTickIndex})),c.a.createElement(P,{selectedKeys:this.state.selectedKeys}))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,n){e.exports=n.p+"static/media/wheresmymind.32304232.mid"},81:function(e,t,n){e.exports=n(170)},86:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.821239ce.chunk.js.map